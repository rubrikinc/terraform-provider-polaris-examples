# Manifest2 Module
The manifest2 module parses the Kubernetes manifest received from the
`polaris_azure_exocompute_cluster_attachment` resource and creates TF
`kubernetes_manifest` resources from the content.

Due to this module using the `kubernetes_manifest` resource it cannot be used
by Terraform until the Kubernetes cluster has been created and the RSC manifest
is known. The reason for this is that `kubernetes_manifest` requires access to
the Kubernetes cluster and manifest during Terraform plan time.

To work around this start by onboarding the subscription, creating the
exocompute configuration and attaching the cluster using the Terraform `-target`
command line option:
```bash
$ terraform apply -target=polaris_azure_exocompute_cluster_attachment.cluster
```

Next, apply the rest of the Terraform configuration:
```bash
$ terraform apply
```

> [!CAUTION]
> The resources in the Kubernetes manifest generated by RSC needs to be applied
> in a specific order. This module tries to replicate the order by applying the
> Kubernetes resources in order based on their Kubernetes kind. This might not
> work in future versions of the manifest. The manifest1 module will always
> apply the Kubernetes resources in the correct order.
